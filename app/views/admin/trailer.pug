extends _layouts/admin

block head
  link(rel="stylesheet", href="/css/admin.css")

block content
  .admin-container
    h1.admin-title Trailer Listing

    table.admin-table
      thead.admin-table-header
        tr
          th.admin-table-th Media
          th.admin-table-th Status
          th.admin-table-th New?
          th.admin-table-th Title
          th.admin-table-th Model #
          th.admin-table-th VIN
          th.admin-table-th Plate #
          th.admin-table-th Size
          th.admin-table-th Price
          th.admin-table-th Sale
          th.admin-table-th Sale Price
          th.admin-table-th Type
      tbody
        each trailer in trailers
          tr.admin-table-row
            td.admin-table-td
              if trailer.media && trailer.media.some(m => m.isPrimary && !m.isDeleted)
                .admin-media-preview-container
                  img.admin-media-preview-image(
                    src=trailer.media.find((m) => m.isPrimary && !m.isDeleted).path,
                    alt=trailer.title
                  )
                  a.admin-media-btn(href=`/admin/media/trailer/${trailer.id}`) Media
              else
                a.admin-media-btn(href=`/admin/media/trailer/${trailer.id}`) Media
            td.admin-table-td
              if trailer.isDeleted
                span.admin-badge.admin-badge-deleted Deleted
              else if trailer.isSold
                span.admin-badge.admin-badge-sold Sold
            td.admin-table-td
              if trailer.isNew
                span.admin-badge.admin-badge-new New
              else
                span.admin-badge.admin-badge-repo Used
            td.admin-table-td
              div= trailer.title
              .admin-description= trailer.description
            td.admin-table-td= trailer.modelNumber
            td.admin-table-td= trailer.vin
            td.admin-table-td= trailer.plateNumber
            td.admin-table-td #{ trailer.sizeWidth }' Ã— #{ trailer.sizeLength }'
            td.admin-table-td.admin-price $#{ (trailer.price / 100).toFixed(2) }
            td.admin-table-td
              if trailer.salePercent > 0
                span.admin-sale-price -#{ trailer.salePercent }%
            td.admin-table-td
              if trailer.salePercent > 0
                span.admin-sale-price $#{ (trailer.price * (1 - trailer.salePercent/100) / 100).toFixed(2) }
              else
                span.admin-price $#{ (trailer.price / 100).toFixed(2) }
            td.admin-table-td= trailer.trailerType
