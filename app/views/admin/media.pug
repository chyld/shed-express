extends _layouts/admin

block content
  div
    div
      h1 Media Manager for #{ type === 'shed' ? 'Shed' : 'Trailer' }: #{ item.title }
      a(href=`/admin/${type}s/${item.id}`) Back to #{ type }

  form(
    action=`/admin/media/${type}/${item.id}/upload`,
    method="POST",
    enctype="multipart/form-data"
  )
    div
      input(type="file", name="media", accept="image/*,video/*")
      button(type="submit") Upload Files

  div
    each mediaItem in media
      div(
        style=mediaItem.isDeleted ? "border: 2px solid red; padding: 10px; margin: 10px 0;" : "padding: 10px; margin: 10px 0;"
      )
        if mediaItem.isPhoto
          img(src=mediaItem.path, alt="Media")
        else
          video(controls)
            source(src=mediaItem.path)

        div
          if mediaItem.isPrimary
            span(style="color: green; margin-right: 10px") â˜… Primary
          span= mediaItem.isPhoto ? "Photo" : "Video"
          span(style="margin-left: 10px")= mediaItem.isDeleted ? "DELETED" : ""

        div(style="display: flex; gap: 10px; margin-top: 10px")
          form(
            action=`/admin/media/${type}/${item.id}/delete/${mediaItem.id}`,
            method="POST"
          )
            button(type="submit")= mediaItem.isDeleted ? "Restore" : "Delete"

          if !mediaItem.isDeleted
            form(
              action=`/admin/media/${type}/${item.id}/primary/${mediaItem.id}`,
              method="POST"
            )
              button(type="submit")= mediaItem.isPrimary ? "Remove Primary" : "Set Primary"

  if media.length === 0
    p No media found. Upload some files to get started.
